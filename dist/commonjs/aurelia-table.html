<template>
	<style>
		.aurelia-table .panel-header {
			display: inline;
		}
		.aurelia-table .table th {
			border-bottom: none;
		}
		.aurelia-table .table.clear-rows > tbody > tr:first-child td {
			border-top: none;
		}
		.aurelia-table .table {
			margin-bottom: 0;
		}
		.aurelia-table .table-base-header {
			min-height: 47px;
		}
		.aurelia-table .click {
			cursor: pointer;
		}
		.aurelia-table .at-title, .aurelia-table .at-column-headers, .aurelia-table .at-headers, .aurelia-table .at-body, .aurelia-table .at-summary {
			border-bottom: 2px solid #ddd;
		}
		.aurelia-table .table > thead > tr > th, .aurelia-table .table > thead > tr > td {
			vertical-align: middle;
		}
	</style>
	<div class="aurelia-table panel panel-default">
		<div class="at-title panel-heading table-base-header" if.bind="header != ''">
			<h3 class="panel-header">${header}</h3>
			<template replaceable part="left-controls"></template>
			<div class="pull-right">
				<template replaceable part="right-controls"></template>
			</div>
		</div>
		<div class="at-column-headers">
			<table class="table table-header ${tableClasses}">
				<thead>
					<tr>
						<th repeat.for="column of columns" show.bind="!column.hidden" css="${column.size} ${column.style}" class="${column.class}" click.delegate="headerClick($event, column)">
							<div style="display: inline-block;">
								<template replaceable part="header"></template>
							</div>
							<div style="display: inline-block; cursor: pointer;" show.bind="column.sortable" click.delegate="sortClick($event, column)">
								<i show.bind="!column.dir" class="fa fa-sort"></i>
								<i show.bind="column.dir" class="fa fa-sort-amount-${column.dir}"></i>
							</div>
						</th>
						<th show.bind="showScrollBar" css="width: ${scrollBarWidth}px; padding: 0;"></th>
					</tr>
				</thead>
			</table>
		</div>
		<div class="at-headers" if.bind="headers.length > 0">
			<table class="table table-header ${tableClasses}">
				<thead>
					<tr repeat.for="row of headers" show.bind="!row.hidden" class="click ${row.class}" css="${row.style}">
						<th repeat.for="column of columns" show.bind="!column.hidden" css="${column.size} ${column.style}" class="${column.class}" click.delegate="cellClick($event, cell)">
							<template replaceable part="headers"></template>
						</th>
						<th show.bind="showScrollBar" css="width: ${scrollBarWidth}px; padding: 0;"></th>
					</tr>
				</thead>
			</table>
		</div>
		<div class="at-body" ref="body" css="${bodyHeight}">
			<table class="table table-body clear-rows ${tableClasses}">
				<tbody>
					<tr repeat.for="row of rows" show.bind="!row.hidden" class="click ${row.active ? 'active':''} ${row.class}" css="${row.style}">
						<td repeat.for="column of columns" show.bind="!column.hidden" css="${column.style}" class="${column.class}" click.delegate="cellClick($event, cell)">
							<template replaceable part="cell"></template>
						</td>
					</tr>
				</thead>
			</table>
		</div>
		<div class="at-summary" if.bind="summary.length > 0">
			<table class="table table-header ${tableClasses}">
				<thead>
					<tr repeat.for="row of summary" show.bind="!row.hidden" class="click ${row.class}" css="${row.style}">
						<th repeat.for="column of columns" show.bind="!column.hidden" css="${column.size} ${column.style}" class="${column.class}" click.delegate="cellClick($event, cell)">
							<template replaceable part="summary"></template>
						</th>
						<th show.bind="showScrollBar" css="width: ${scrollBarWidth}px; padding: 0;"></th>
					</tr>
				</thead>
			</table>
		</div>
	</div>
</template>